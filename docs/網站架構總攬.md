## 網站架構總覽

此網站主要分為三個核心部分：**資料表格管理**、**儀表板管理**和**圖表管理**，使用者可透過左側的**導覽列**快速切換。

---

### 資料表格管理 (Data Table Management)

這個區塊是用戶匯入和管理資料的中心。

#### 1. 資料表格列表頁
這個頁面以列表或卡片形式展示所有資料表格，包含**表格名稱**、**上傳日期**和**檔案大小**等基本資訊。
* 你可以使用**搜尋欄**快速尋找特定表格。
* 點擊**上傳按鈕**會開啟一個對話框，讓你選擇兩種上傳模式：**僅上傳資料內容**或**上傳包含資訊與資料的檔案**。
* 在列表中，每個表格都有**瀏覽**、**編輯**、**更新**、**下載**和**刪除**等操作選項。

#### 2. 上傳資料表格對話框
這個對話框讓你上傳資料檔案。
* 你可以**拖曳檔案**到指定區域，或是點擊區塊來選擇檔案。
* 上傳單一檔案後，系統會自動跳轉至**上傳/編輯資料表格頁面**，並將檔案名稱（或檔案內提供的名稱）作為表格名稱。
* 如果上傳多個檔案，系統會直接回到**資料表格列表頁**，並在解析完成後通知你哪些檔案成功新增，哪些失敗。

#### 3. 上傳/編輯資料表格頁面
這個頁面用於編輯表格的基本資訊。
* 你可以編輯**表格名稱**和**描述**，並**預覽**部分資料內容。
* 點擊**更新按鈕**會開啟另一個對話框，讓你上傳新的資料內容來替換舊資料。
* 點擊**確認按鈕**後會儲存設定並回到列表頁。如果表格名稱與現有表格重複，此按鈕會被禁用。
* 點擊**取消按鈕**會放棄所有變動並回到列表頁。

#### 4. 更新資料內容對話框
這個對話框專門用於更新現有表格的資料。
* 你只能上傳**一個**新檔案來替換原來的資料。
* 更新成功後，系統會通知你並帶你回到上一頁。

---

### 儀表板管理 (Dashboard Management)

這個區塊是視覺化分析的核心，讓使用者創建、編輯和展示儀表板。

#### 1. 儀表板列表頁
這個頁面顯示所有儀表板，包含**儀表板名稱**、**建立日期**和**作者**等資訊。
* 你可以使用**搜尋欄**尋找特定儀表板。
* 點擊**創建按鈕**會開啟一個對話框，讓你選擇**從頭創建**或**上傳儀表板設定**。
* 每個儀表板都提供**瀏覽**、**更新**、**編輯**、**下載**和**刪除**等操作。

#### 2. 創建儀表板對話框
這個對話框讓你開始創建新的儀表板。
* 你可以選擇**從頭創建**，直接進入編輯模式。
* 或者選擇上傳一個**設定檔**。如果上傳單一檔案，系統會進入編輯模式並自動解析檔案內容；如果上傳多個檔案，系統會回到列表頁並通知你上傳結果。

#### 3. 儀表板展示模式
這個模式提供了一個簡潔的介面來展示和互動。
* 頁面會顯示儀表板的**標題**和**描述**，以及所有圖表。
* 你可以直接與圖表互動，例如進行**篩選**和**縮放**。
* 頁面提供**返回**、**編輯**和**下載**等按鈕。

#### 4. 儀表板編輯模式
這個模式讓你能自由地設計儀表板。
* **畫布區**是主要工作區，你可以在這裡拖曳、調整圖表的位置和大小。
* **圖表工具區**位於側邊或頂部，提供**新增圖表**功能和現有圖表列表。
* **設定面板**用於編輯儀表板的名稱和描述。
* 你可以隨時**儲存**編輯進度，或者點擊**確認**來完成編輯並回到展示模式。如果儀表板名稱重複，這些按鈕會被禁用。

#### 5. 圖表創建/編輯頁面
這個頁面只能從**儀表板編輯模式**進入，讓你自由設計圖表。
* 你可以選擇**圖表名稱**、**資料表**和**圖表類型**。
* **內容項目**和**樣式選擇**會根據你選擇的圖表類型而有所不同。
* **預覽區**會即時顯示圖表效果，並在設定錯誤時提示。
* 點擊**確認按鈕**會儲存圖表設定並回到儀表板編輯模式。如果圖表名稱與現有圖表重複或設定有誤，此按鈕會被禁用。

---

### 圖表管理 (Chart Management)

這個區塊專門用於展示和下載已創建的圖表。

#### 1. 圖表列表頁
這個頁面顯示所有圖表，包含**圖表名稱**、**類型**和**關聯儀表板**等資訊。
* 你可以使用**搜尋欄**尋找特定圖表。
* 每個圖表都提供**查看**和**下載**選項。

#### 2. 圖表展示模式
這個模式單獨顯示圖表，並提供相關資訊。
* 頁面會顯示完整的**圖表**，並提供基本的**互動功能**。
* **相關資訊區**會列出圖表的名稱、類型、資料來源，以及所有使用此圖表的**儀表板名稱**。
* 你可以點擊**關聯儀表板**名稱，直接跳轉到該儀表板的展示模式。
* 請注意，這個頁面不提供編輯或刪除功能。如果你需要修改圖表，必須回到相關的儀表板編輯模式中進行。


## 詳細規劃

### 總體
- **首頁 (Homepage)：** 網站的主要入口，可展示重要資訊、最近使用的儀表板或資料表格。
- **導覽列 (Navigation Bar)：** 固定在頁面左側，提供使用者快速切換至「資料表格管理」、「儀表板管理」和「圖表管理」等主要功能頁面。

---

### 資料表格管理 (Data Table Management)
此區塊是資料的匯入與管理中心。

1. **資料表格列表頁 (Data Tables List)**
   - **主要功能區：**
     - **資料表格列表：** 以列表或卡片形式展示所有資料表格。應包含**表格名稱**、**上傳日期**、**檔案大小**等基本資訊。
     - **搜尋欄：** 供使用者依據**表格名稱**快速搜尋。
     - **上傳按鈕：** 一個按鈕，點擊後跳出**上傳資料表格對話框**，讓使用者選擇上傳模式（僅資料內容、包含資訊與資料）和上傳資料表格。
   - **單一表格操作：** 列表中的每個項目都應有操作選項，包含**瀏覽**、**編輯**、**更新**、**下載**和**刪除**。

2. **上傳資料表格對話框(Upload Data Table Dialog)**
   - **上傳模式可選項：**
     - **模式一：** 僅上傳資料內容（檔案），系統自動生成表格資訊。
     - **模式二：** 上傳包含資訊與資料的檔案，系統直接解析。
   - **上傳檔案區塊：** 上傳資料表格檔案用，可拖曳檔案上傳，也可點擊區塊後跳出檔案選擇對話框選擇檔案。檔案選擇操作完成後，此區塊轉為檔案列表，供使用者查看與最後確認。
   - **確認按鈕：** 確認上傳操作，後續根據上傳檔案數量分為兩種情況：
     - **單一檔案上傳：** 進入**上傳資料表格頁面**，將檔案名稱(模式一)或者資訊中提供的名稱(模式二)作為此資料表格名稱，從資訊中解析出表格資訊填入對應資訊格子，解析資料內容呈現於內容預覽。
     - **多個檔案上傳：** 各檔案各自進行解析，畫面直接回到**資料表格列表頁**，並根據解析成功與否決定是(解析成功)新增資料表格或者(解析失敗)不新增，並且跳出訊息通知。
   - **取消按鈕：** 取消上傳操作並回到**資料表格列表頁**。

3. **上傳/編輯資料表格頁面 (Upload/Edit Data Table)**
   - 提供表單讓使用者編輯**表格名稱**、**描述**等資訊。
   - **資料內容預覽：** 可在頁面中預覽部分資料，但無法在此直接修改資料內容。
   - **更新按鈕：** 僅出現在**編輯資料表格頁面**中，點擊後跳出**更新資料內容對話框**，讓使用者上傳更新的資料內容。
   - **確認按鈕：** 確認當前設定，完成上傳/編輯資料表格操作，並回到**資料表格列表頁**。如果表格名稱與其餘表格的名稱重複，此按鈕無法使用。
   - **取消按鈕：** 取消上傳/編輯資料表格，並回到**資料表格列表頁**。如果從**上傳資料表格對話框**來的話，等於放棄上傳資料表格；其他來源則代表放棄編輯，使用原本資料表格設定。

4. **更新資料內容對話框(Update Data)**
   - **上傳檔案區塊：** 上傳資料內容檔案用，可拖曳檔案上傳，也可點擊區塊後跳出檔案選擇對話框選擇檔案。檔案選擇操作完成後，此區塊轉為檔案列表，供使用者查看與最後確認。僅能上傳單一檔案。
   - **確認按鈕：** 確認更新操作，檔案自進行解析，畫面直接回到來源頁，可能是 **資料表格列表頁** 或者 **編輯資料表格頁面**，並根據解析成功與否決定是(解析成功)更新資料內容或者(解析失敗)不更新，並且跳出訊息通知。
   - **取消按鈕：** 取消更新操作並回到來源頁。

---

### 儀表板管理 (Dashboard Management)
此區塊是視覺化分析的核心，使用者在此建立、編輯與展示儀表板。

1. **儀表板列表頁 (Dashboards List)**
   - **主要功能區：**
     - **儀表板列表：** 顯示所有儀表板，應包含**儀表板名稱**、**建立日期**、**作者**等資訊。
     - **搜尋欄：** 依據**儀表板名稱**進行搜尋。
     - **創建按鈕：** 一個按鈕，點擊後跳出**創建儀表板對話框**。讓使用者選擇**從頭創建**或**上傳儀表板設定**。
   - **單一儀表板操作：** 列表中的每個項目都應有操作選項，包含**瀏覽**、**更新**、**編輯**、**下載**和**刪除**。

2. **創建儀表板對話框(Create Dashboard Dialog)**
   - **從頭創建按鈕：** 點擊後進入**儀表板編輯模式**。
   - **上傳檔案區塊：** 上傳儀表板設定檔用，可拖曳檔案上傳，也可點擊區塊後跳出檔案選擇對話框選擇檔案。檔案選擇操作完成後，此區塊轉為檔案列表，供使用者查看與最後確認。
   - **確認按鈕：** 確認上傳操作，後續根據上傳檔案數量分為兩種情況：
     - **單一檔案上傳：** 進入**儀表板編輯模式**，從檔案中解析出儀表板標題與資訊和圖表等，分別呈現於對應區塊。
     - **多個檔案上傳：** 各檔案各自進行解析，畫面直接回到**儀表板列表頁**，並根據解析成功與否決定是(解析成功)新增儀表板或者(解析失敗)不新增，並且跳出訊息通知。
   - **取消按鈕：** 取消上傳操作並回到**儀表板列表頁**。


3. **儀表板展示模式 (Dashboard View)**
   - **目的：** 提供一個簡潔的介面供使用者展示和互動。
   - **介面構成：**
     - **儀表板標題與資訊：** 顯示儀表板名稱與簡要描述。
     - **圖表區：** 以網格或自由排版的方式展示所有圖表。
     - **圖表互動：** 使用者可以點擊或懸停在圖表上，觸發**篩選**、**縮放**、**鑽取**等互動功能。
     - **操作按鈕：**
       - **返回按鈕：** 回到儀表板列表。
       - **編輯按鈕：** 進入**儀表板編輯模式**。
       - **下載按鈕：** 下載儀表板成品（例如PDF、圖片）或設定檔。

4. **儀表板編輯模式 (Dashboard Editor)**
   - **目的：** 允許使用者自由地設計儀表板。
   - **介面構成：**
     - **畫布區：** 儀表板的主要工作區，使用者可在此拖曳、調整圖表位置與大小。
       - **單一圖表操作：** 圖表右上角有**編輯**、**複製**、**隱藏**等圖示按鈕。
     - **圖表工具區：** 位於側邊或頂部，提供以下功能：
       - **新增圖表按鈕：**
         - **從頭創建：** 導向**圖表創建頁面**。
         - **上傳設定：** 讓使用者匯入現有的圖表設定。
       - **圖表列表：** 顯示此儀表板已有的圖表。
       - **單一圖表操作：** 點擊圖表後，出現**編輯**、**複製**、**隱藏**、**刪除**等選項。
     - **設定面板：** 位於側邊，用於編輯**儀表板資訊**（名稱、描述等）。
     - **儲存按鈕：** 隨時儲存編輯進度。如果儀表板名稱與其餘儀表板的名稱重複，此按鈕無法使用。
     - **確認按鈕：** 確認當前設定，完成儀表板創建/編輯操作，並回到**儀表板展示模式**。如果儀表板名稱與其餘儀表板的名稱重複，此按鈕無法使用。
     - **取消按鈕：** 取消剩餘設定，回到最後儲存的編輯進度，並回到**儀表板展示模式**。如果在沒有儲存進度的狀況下取消，根據進入此模式的來源又分兩種狀況：從**創建儀表板對話框**來的話，等於放棄創建儀表板；其他來源則代表放棄編輯，使用原本儀表板設定。

5. **圖表創建/編輯頁面 (Edit Chart)**
   - **進入限制：** 僅能從 **儀表板編輯模式** 下的 **單一圖表操作/編輯** 或 **新增圖表按鈕/從頭創建** 進入。
   - **目的：** 允許使用者自由地設計圖表
   - **介面構成：**
     - **圖表名稱：** 用於編輯圖表名稱。
     - **資料表選擇：** 決定圖表資料來源。
     - **圖表類型選擇：** 決定圖表類型。
     - **內容項目選擇：** 決定圖表將要顯示的資料內容。根據不同圖表類型，此區塊會有不同的設定需求。
     - **樣式選擇：** 決定圖表顯示的各元件套用的樣式。根據不同圖表類型，此區塊會有不同的設定需求。
     - **預覽區：** 預覽當前設定下圖表成品效果。如果顯示項目尚未選擇，呈現該圖表類型淺色預設圖表。如果內容項目選擇錯誤(如不合規格、無法解析等)，將顯示錯誤，並列出錯誤名稱與內容。
     - **確認按鈕：** 確認當前設定，完成圖表創建/編輯操作，並回到**儀表板編輯模式**。如果圖表名稱與當前儀表板其餘圖表的名稱重複，或者內容項目選擇錯誤的狀況下，此按鈕無法使用。
     - **取消按鈕：** 取消圖表創建/編輯操作，並回到**儀表板編輯模式**。

---

### 圖表管理 (Chart Management)
此區塊專注於展示與下載圖表。

1. **圖表列表頁 (Charts List)**
   - **主要功能區：**
     - **圖表列表：** 顯示所有已創建的圖表，包含**圖表名稱**、**類型**、**關聯儀表板**等資訊。
     - **搜尋欄：** 依據**圖表名稱**進行搜尋。
   - **單一圖表操作：**
     - **查看按鈕：** 進入**圖表展示模式**。
     - **下載按鈕：** 下載圖表成品或設定檔。

2. **圖表展示模式 (Chart View)**
   - **目的：** 單獨展示圖表，並提供相關資訊。
   - **介面構成：**
     - **圖表區：** 展示完整的圖表。
     - **互動功能：** 提供基本的互動，例如**縮放**、**工具提示**等。
     - **相關資訊區：**
       - **圖表資訊：** 顯示圖表名稱、類型、所用資料來源等。
       - **關聯儀表板：** 顯示使用此圖表的所有儀表板名稱，並提供**連結**可直接跳轉至該儀表板的展示模式。
   - **注意事項：** 如您所提，此頁面**不提供**創建、編輯或刪除功能。使用者若想編輯圖表，必須透過相關儀表板進入編輯模式。



## 檔案區域規劃
資料表格
- 內容上傳 -> uploads/data
- 資訊加內容上傳 -> uploads/data_info
- 資料內容 -> data
- 資料表格資訊 -> db
- (預定) 資料欄位資訊

圖表
- 圖表設定上傳 -> uploads/charts
- 圖表資訊 -> db
- 圖表預覽圖 -> charts/preview
- 圖表設定 -> charts

儀錶板
- 儀表板設定上傳 -> uploads/boards
- 儀表板資訊 -> db
- 儀表板預覽圖 -> boards/preview
- 儀表板設定 -> boards

```
/userData
  /tables         # 資料表格
    /[id].json    # 資料表格內容檔案
  /charts         # 圖表
    /[id]
      /config.json  # 圖表設定檔
      /preview.png  # 圖表預覽圖
  /dashboards     # 儀表板
    /[id]
      /config.json  # 儀表板設定檔
      /preview.png  # 儀表板預覽圖
      /export.pdf   # 儀表板 PDF 檔案
      /export.html  # 儀表板 HTML 檔案
  /logs           # 紀錄檔
    /[timestamp].log
```

## 原始碼規劃
```front end
  src/
  ├── assets/data.json, snake.jpg
  ├── components/common/ConfirmCancelButtons.tsx, DataTable.tsx, EditableCell.tsx, EditableTitle.tsx, Logo.tsx, PageHeader.tsx, SimpleTable.tsx
  ├── components/DataTablesPage/DataTableList.tsx, UploadDataTableDialog.tsx
  ├── components/layout/Breadcrumb.tsx, layout.css, Layout.tsx, PageWrapper.tsx, RightPanel.tsx, Sidebar.tsx, TocList.tsx, TocListItem.tsx, TopNav.tsx
  ├── context/LayoutContext.tsx, LayoutProvider.tsx, useLayoutContext.tsx
  ├── hooks/useFileParser.tsx, useTableEditor.tsx
  ├── pages/ChartEditorPage.tsx, ChartsPage.tsx, ChartViewPage.tsx, DashboardPage.tsx, DashboardsPage.tsx, DataTableEditorPage.tsx, DataTablesPage.tsx, DownloadPage.tsx, HomePage.tsx, TestingPage.tsx, UploadPage.tsx
  ├── stores/layoutStore.ts
  ├── theme/index.ts
  ├── App.tsx
  ├── main.tsx
  ├── mui.d.ts
  ├── types.tsx
  ├── utils.tsx
  └── vite-env.d.ts
```
```backend
  electron/
  ├── ipc/APIModule.cts, ChartAPIHandlers.cts, DashboardAPIHandlers.cts, DataTableAPIHandlers.cts
  ├── models/ChartManager.cts, DatabaseManager.cts, DataTableManager.cts, FileManager.cts
  ├── node_modules/.tmp/tsconfig.electron.tsbuildinfo
  ├── services/DataTableService.cts
  ├── windows/mainWindow.cts
  ├── constants.cts
  ├── main.cts
  ├── preload.cts
  ├── tsconfig.json
  ├── types.cts
  └── utils.cts
```