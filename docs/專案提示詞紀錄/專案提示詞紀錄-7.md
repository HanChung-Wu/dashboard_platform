## Gemini 提問 資料表格-卡片與列表切換
現在是以卡片型式顯示表格資訊，但我想在 `<Typography variant="h4" sx={{ fontWeight: "bold" }}>資料表格管理</Typography>` 旁邊放一個按鈕，可以在卡片和列表型式之間切換

【相關檔案】
```tsx
...
      <Box sx={{ p: 3 }}>
        <Grid container alignItems="center" spacing={2} sx={{ mb: 3 }}>
          <Grid size={{ xs: 12, sm: 6 }}>
            <Typography variant="h4" sx={{ fontWeight: "bold" }}>
              資料表格管理
            </Typography>
          </Grid>
          <Grid
            size={{ xs: 12, sm: 6 }}
            container
            justifyContent="flex-end"
            spacing={1}
          >
            <Grid>
              <TextField
                label="搜尋表格"
                variant="outlined"
                size="small"
                value={searchText}
                onChange={(e) => setSearchText(e.target.value)}
              />
            </Grid>
            <Grid>
              <Button
                variant="contained"
                startIcon={<AddIcon />}
                onClick={() => setUploadDialogOpen(true)}
              >
                上傳資料表格
              </Button>
            </Grid>
          </Grid>
        </Grid>

        {/* 資料表格列表 */}
        <DataTableList dataTables={filteredDataTables} />

        {/* 上傳資料表格對話框 */}
        <UploadDataTableDialog
          open={uploadDialogOpen}
          onClose={() => setUploadDialogOpen(false)}
        />
      </Box>
...
```

```tsx
// src/components/DataTablesPage/DataTableList.tsx
import {
  Box,
  Card,
  CardContent,
  Typography,
  Grid,
  IconButton,
  Menu,
  MenuItem,
} from "@mui/material";
import MoreVertIcon from "@mui/icons-material/MoreVert";
import { useState } from "react";

interface DataTableInfo {
  id: string;
  name: string;
  uploadDate: string;
  fileSize: string;
}

interface Props {
  dataTables: DataTableInfo[];
}

export const DataTableList = ({ dataTables }: Props) => {
  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);
  const [selectedTableId, setSelectedTableId] = useState<string | null>(null);

  const handleMenuClick = (
    event: React.MouseEvent<HTMLElement>,
    tableId: string
  ) => {
    setAnchorEl(event.currentTarget);
    setSelectedTableId(tableId);
  };

  const handleMenuClose = () => {
    setAnchorEl(null);
    setSelectedTableId(null);
  };

  const handleAction = (action: string) => {
    console.log(`對表格 ${selectedTableId} 執行操作: ${action}`);
    handleMenuClose();
  };

  return (
    <Grid container spacing={3}>
      {dataTables.length > 0 ? (
        dataTables.map((table) => (
          <Grid size={{ xs: 12, sm: 6, md: 4 }} key={table.id}>
            <Card variant="outlined">
              <CardContent>
                <Box
                  sx={{
                    display: "flex",
                    justifyContent: "space-between",
                    alignItems: "center",
                  }}
                >
                  <Typography variant="h6" component="div">
                    {table.name}
                  </Typography>
                  <IconButton
                    aria-label="more"
                    onClick={(e) => handleMenuClick(e, table.id)}
                  >
                    <MoreVertIcon />
                  </IconButton>
                </Box>
                <Typography variant="body2" color="text.secondary">
                  上傳日期: {table.uploadDate}
                </Typography>
                <Typography variant="body2" color="text.secondary">
                  檔案大小: {table.fileSize}
                </Typography>
              </CardContent>
            </Card>
          </Grid>
        ))
      ) : (
        <Grid size={{ xs: 12 }}>
          <Typography variant="h6" color="text.secondary" align="center">
            沒有找到符合條件的資料表格。
          </Typography>
        </Grid>
      )}

      {/* 單一表格操作選單 */}
      <Menu
        anchorEl={anchorEl}
        open={Boolean(anchorEl)}
        onClose={handleMenuClose}
      >
        <MenuItem onClick={() => handleAction("瀏覽")}>瀏覽</MenuItem>
        <MenuItem onClick={() => handleAction("編輯")}>編輯</MenuItem>
        <MenuItem onClick={() => handleAction("更新")}>更新</MenuItem>
        <MenuItem onClick={() => handleAction("下載")}>下載</MenuItem>
        <MenuItem onClick={() => handleAction("刪除")}>刪除</MenuItem>
      </Menu>
    </Grid>
  );
};
```

## Gemini 回答 資料表格-卡片與列表切換
在 `Typography` 旁邊新增一個切換顯示方式的按鈕，並讓 `DataTableList` 根據這個狀態來改變其顯示。這是一個非常常見且實用的功能。

-----

### 實作切換顯示模式的功能

我會將這個功能拆解成以下幾個步驟：

1.  在 **`DataTablesPage.tsx`** 中，新增一個狀態來追蹤目前的顯示模式（例如 'card' 或 'list'）。
2.  在標題旁放置一個按鈕，讓使用者可以點擊來切換這個狀態。
3.  將這個顯示模式的狀態作為 props 傳遞給 **`DataTableList.tsx`**。
4.  在 **`DataTableList.tsx`** 中，根據接收到的 props，渲染出**卡片**或**列表**兩種不同形式的 UI。

#### 1\. 修改 `DataTablesPage.tsx`

在 `DataTablesPage` 中，我們需要管理顯示模式的狀態，並在標題旁增加一個切換按鈕。我會使用 MUI 的 `ToggleButton` 來實現這個功能，因為它最適合表示兩種互斥的狀態。

```tsx
import { useState } from 'react';
import { Box, Typography, TextField, Button, Grid, ToggleButton, ToggleButtonGroup } from '@mui/material';
import AddIcon from '@mui/icons-material/Add';
import ViewModuleIcon from '@mui/icons-material/ViewModule';
import ViewListIcon from '@mui/icons-material/ViewList';
import { PageWrapper } from '../components/layout/PageWrapper';
import type { PageConfig } from '../types';
import { DataTableList } from '../components/DataTablesPage/DataTableList';
import { UploadDataTableDialog } from '../components/DataTablesPage/UploadDataTableDialog';

const fakeDataTables = [
  // ... (保持不變)
];

export const DataTablesPage = () => {
  const [searchText, setSearchText] = useState('');
  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);
  // 新增狀態來管理顯示模式，預設為 'card'
  const [viewMode, setViewMode] = useState<'card' | 'list'>('card');

  const filteredDataTables = fakeDataTables.filter(table =>
    table.name.toLowerCase().includes(searchText.toLowerCase())
  );

  const handleViewModeChange = (
    event: React.MouseEvent<HTMLElement>,
    newViewMode: 'card' | 'list'
  ) => {
    // 只有當新模式不為 null 時才更新狀態
    if (newViewMode !== null) {
      setViewMode(newViewMode);
    }
  };

  const pageConfig: Omit<PageConfig, 'tocItems'> = {
    breadcrumbItems: [{ label: '資料表格管理', path: '/data-tables' }],
    content: (
      <Box sx={{ p: 3 }}>
        <Grid container alignItems="center" spacing={2} sx={{ mb: 3 }}>
          <Grid size={{ xs: 12, sm: 6 }} container alignItems="center" spacing={2}>
            {/* 標題與模式切換按鈕 */}
            <Grid>
              <Typography variant="h4" sx={{ fontWeight: 'bold' }}>
                資料表格管理
              </Typography>
            </Grid>
            <Grid>
              <ToggleButtonGroup
                value={viewMode}
                exclusive
                onChange={handleViewModeChange}
                aria-label="view mode"
                size="small"
              >
                <ToggleButton value="card" aria-label="card view">
                  <ViewModuleIcon />
                </ToggleButton>
                <ToggleButton value="list" aria-label="list view">
                  <ViewListIcon />
                </ToggleButton>
              </ToggleButtonGroup>
            </Grid>
          </Grid>
          <Grid
            size={{ xs: 12, sm: 6 }}
            container
            justifyContent="flex-end"
            spacing={1}
          >
            {/* 搜尋與上傳按鈕 (保持不變) */}
            <Grid>
              <TextField
                label="搜尋表格"
                variant="outlined"
                size="small"
                value={searchText}
                onChange={(e) => setSearchText(e.target.value)}
              />
            </Grid>
            <Grid>
              <Button
                variant="contained"
                startIcon={<AddIcon />}
                onClick={() => setUploadDialogOpen(true)}
              >
                上傳資料表格
              </Button>
            </Grid>
          </Grid>
        </Grid>
        
        {/* 將 viewMode 作為 props 傳遞給 DataTableList */}
        <DataTableList dataTables={filteredDataTables} viewMode={viewMode} />

        {/* 上傳對話框 (保持不變) */}
        <UploadDataTableDialog open={uploadDialogOpen} onClose={() => setUploadDialogOpen(false)} />
      </Box>
    ),
  };

  return <PageWrapper {...pageConfig} />;
};
```

#### 2\. 修改 `DataTableList.tsx`

在 `DataTableList` 中，我們需要新增一個 `viewMode` props，並根據它的值來決定渲染的元件。當 `viewMode` 為 'list' 時，我們將渲染一個 `Table` 元件而不是 `Grid` 和 `Card`。

```tsx
import {
  Box,
  Card,
  CardContent,
  Typography,
  Grid,
  IconButton,
  Menu,
  MenuItem,
  Table,
  TableBody,
  TableCell,
  TableContainer,
  TableHead,
  TableRow,
  Paper,
} from "@mui/material";
import MoreVertIcon from "@mui/icons-material/MoreVert";
import { useState } from "react";

interface DataTableInfo {
  id: string;
  name: string;
  uploadDate: string;
  fileSize: string;
}

interface Props {
  dataTables: DataTableInfo[];
  // 新增 viewMode 屬性
  viewMode: 'card' | 'list';
}

export const DataTableList = ({ dataTables, viewMode }: Props) => {
  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);
  const [selectedTableId, setSelectedTableId] = useState<string | null>(null);

  const handleMenuClick = (
    event: React.MouseEvent<HTMLElement>,
    tableId: string
  ) => {
    setAnchorEl(event.currentTarget);
    setSelectedTableId(tableId);
  };

  const handleMenuClose = () => {
    setAnchorEl(null);
    setSelectedTableId(null);
  };

  const handleAction = (action: string) => {
    console.log(`對表格 ${selectedTableId} 執行操作: ${action}`);
    handleMenuClose();
  };

  // 渲染列表的 Helper 函式
  const renderList = () => (
    <TableContainer component={Paper}>
      <Table>
        <TableHead>
          <TableRow>
            <TableCell>表格名稱</TableCell>
            <TableCell>上傳日期</TableCell>
            <TableCell>檔案大小</TableCell>
            <TableCell align="right">操作</TableCell>
          </TableRow>
        </TableHead>
        <TableBody>
          {dataTables.map((table) => (
            <TableRow key={table.id}>
              <TableCell>{table.name}</TableCell>
              <TableCell>{table.uploadDate}</TableCell>
              <TableCell>{table.fileSize}</TableCell>
              <TableCell align="right">
                <IconButton aria-label="more" onClick={(e) => handleMenuClick(e, table.id)}>
                  <MoreVertIcon />
                </IconButton>
              </TableCell>
            </TableRow>
          ))}
        </TableBody>
      </Table>
    </TableContainer>
  );

  // 渲染卡片的 Helper 函式
  const renderCards = () => (
    <Grid container spacing={3}>
      {dataTables.length > 0 ? (
        dataTables.map((table) => (
          <Grid size={{ xs: 12, sm: 6, md: 4 }} key={table.id}>
            <Card variant="outlined">
              <CardContent>
                <Box
                  sx={{
                    display: "flex",
                    justifyContent: "space-between",
                    alignItems: "center",
                  }}
                >
                  <Typography variant="h6" component="div">
                    {table.name}
                  </Typography>
                  <IconButton
                    aria-label="more"
                    onClick={(e) => handleMenuClick(e, table.id)}
                  >
                    <MoreVertIcon />
                  </IconButton>
                </Box>
                <Typography variant="body2" color="text.secondary">
                  上傳日期: {table.uploadDate}
                </Typography>
                <Typography variant="body2" color="text.secondary">
                  檔案大小: {table.fileSize}
                </Typography>
              </CardContent>
            </Card>
          </Grid>
        ))
      ) : (
        <Grid size={{ xs: 12 }}>
          <Typography variant="h6" color="text.secondary" align="center">
            沒有找到符合條件的資料表格。
          </Typography>
        </Grid>
      )}
    </Grid>
  );

  return (
    <Box>
      {dataTables.length === 0 ? (
        <Typography variant="h6" color="text.secondary" align="center">
          沒有找到符合條件的資料表格。
        </Typography>
      ) : (
        <>
          {viewMode === 'card' ? renderCards() : renderList()}
        </>
      )}

      {/* 單一表格操作選單 (保持不變) */}
      <Menu
        anchorEl={anchorEl}
        open={Boolean(anchorEl)}
        onClose={handleMenuClose}
      >
        <MenuItem onClick={() => handleAction("瀏覽")}>瀏覽</MenuItem>
        <MenuItem onClick={() => handleAction("編輯")}>編輯</MenuItem>
        <MenuItem onClick={() => handleAction("更新")}>更新</MenuItem>
        <MenuItem onClick={() => handleAction("下載")}>下載</MenuItem>
        <MenuItem onClick={() => handleAction("刪除")}>刪除</MenuItem>
      </Menu>
    </Box>
  );
};
```

### 總結

這個方案成功實現了卡片與列表視圖的切換功能。

1.  **狀態管理**：在 `DataTablesPage` 中，我們用 `useState` 集中管理 `viewMode` 狀態。
2.  **使用者介面**：我們使用了 `ToggleButtonGroup` 提供了清晰的視覺化切換按鈕。
3.  **條件渲染**：在 `DataTableList` 中，我們根據 `viewMode` 的值，使用條件渲染來呈現不同的 UI 結構。

這個方案讓你的程式碼結構清晰，且易於擴展。

## Gemini 提問 
## Gemini 回答 
## Gemini 提問 
## Gemini 回答 
## Gemini 提問 
## Gemini 回答 
## Gemini 提問 
## Gemini 回答 
## Gemini 提問 
## Gemini 回答 
## Gemini 提問 
## Gemini 回答 
## Gemini 提問 
## Gemini 回答 
## Gemini 提問 
## Gemini 回答 
## Gemini 提問 
## Gemini 回答 
## Gemini 提問 
## Gemini 回答 
## Gemini 提問 
## Gemini 回答 